{% extends 'base.html' %}
{% block title %}Menu{% endblock %}
{% load static %}



{% block sliderl %}

{% endblock sliderl %}
{% block content %}
<!-- ---------------------------------------------- -->
<section class="offer_section layout_padding-bottom">
  <div class="offer_container">
    <div class="container ">
      <div class="row">
        <div class="col-md-6  ">
          <div class="box ">
            <div class="img-box">
              <img src="{% static 'images/o1.jpg' %}" alt="">
            </div>
            <div class="detail-box">
              <h5>
                Tasty Thursdays
              </h5>
              <h6>
                <span>20%</span> Off
              </h6>
              <a href="">
                Order Now <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029;" xml:space="preserve">
                  <g>
                    <g>
                      <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                   c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                   C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                   c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                   C457.728,97.71,450.56,86.958,439.296,84.91z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                   c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z" />
                    </g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div class="col-md-6  ">
          <div class="box ">
            <div class="img-box">
              <img src="{% static 'images/o2.jpg' %}" alt="">
            </div>
            <div class="detail-box">
              <h5>
                Pizza Days
              </h5>
              <h6>
                <span>15%</span> Off
              </h6>
              <a href="">
                Order Now <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029;" xml:space="preserve">
                  <g>
                    <g>
                      <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                   c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                   C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                   c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                   C457.728,97.71,450.56,86.958,439.296,84.91z" />
                    </g>
                  </g>
                  <g>
                    <g>
                      <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                   c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z" />
                    </g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                  <g>
                  </g>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
 <!-- -------------------------------------------------- -->
<style>
      .filters_menu li.active {
    color: #fff;
    background-color: #ff9800;
    border-radius: 5px;
    padding: 5px 10px;
  }

</style>
<section class="food_section layout_padding-bottom">
  <div class="container">
    <div class="heading_container heading_center">
      <h2>Our Menu</h2>
    </div>

    <!-- Filter Menu -->
    <ul class="filters_menu">
      <li class="active" data-filter="all">All</li>
      <li data-filter="burger">Burger</li>
      <li data-filter="pizza">Pizza</li>
      <li data-filter="pasta">Pasta</li>
      <li data-filter="fries">Fries</li>
    </ul>

    <div class="filters-content">
      <div class="row grid">
        {% for product, range, nSlides in allProds %}
          {% for item in product %}
            <div class="col-sm-6 col-lg-4 all" data-category="{{ item.category|lower }}">
              <div class="box">
                <div class="img-box">
                  <img 
                    src="{% if item.image %}/media/{{ item.image }}{% else %}{% static 'images/placeholder.png' %}{% endif %}" 
                    alt="{{ item.product_name }}" 
                    class="product-image"
                  >
                </div>
                <div class="detail-box">
                  <h5>{{ item.product_name }}</h5>
                  <p>{{ item.desc|slice:"0:53" }}...</p>
                  <div class="options">
                    <h6>${{ item.price }}</h6>

                    <button
                      class="add-to-cart-btn" 
                      data-id="{{ item.id }}" 
                      data-name="{{ item.product_name }}" 
<<<<<<< HEAD

                      data-price="{{ item.price }}"  style= " background: linear-gradient(to right, #803434, #B8860B) ;  display: flex;
                      align-items: center;
                      justify-content: center;
                      background: linear-gradient(to right, #803434, #B8860B);
                      width: 150px;
                      padding: 10px;
                      border: none;
                      color: white;
                      font-weight: bold;
                      font-size: 14px;
                      border-radius:20px;">
                      <span style="margin-right: 8px;">Add to Cart</span>
                      <img src="{% static 'images/cart.png' %}" style=" width: 20px; height: 20px;" alt="Cart" class="fa fa-shopping-cart" id="popcart" data-toggle="popover" data-placement="bottom" >
                    
                  </button>
                    <!-- <a href="#">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M351.9 329.506H206.81l-3.072-12.56H368.16l26.63-116.019-217.23-26.04-9.952-58.09h-50.4v21.946h31.894l35.233 191.246a32.927 32.927 0 1 0 36.363 21.462h100.244a32.825 32.825 0 1 0 30.957-21.945zM181.427 197.45l186.51 22.358-17.258 75.195H198.917z" data-name="Shopping Cart"/></svg>
                        <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248"></path>
                        
                      </svg>
                    </a> -->
=======
                      data-price="{{ item.price }}"
                      style="background: linear-gradient(to right, #803434, #B8860B);">
                      <img src="{% static 'images/cart.png' %}" style="width: 22px;" alt="Cart">
                    </button>
>>>>>>> 8c54d9bcc69126e2013f005495df6d17756fdfb7
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Cart Popup -->
  <div id="cart-popup" style="display: none; position: fixed; top: 20%; right: 10%; background: white; border: 1px solid #ccc; padding: 20px; width: 300px; z-index: 1000;">
    <div id="cart-items-list" class="cart-items-list"></div>
    <div id="cart-summary" class="cart-summary"></div>
    <button id="clear-cart-btn" style="margin-top: 10px; background-color: red; color: white; padding: 5px 10px;">Clear Cart</button>
    <button id="close-cart-btn" style="margin-top: 10px; background-color: #555; color: white; padding: 5px 10px;">Close</button>
  </div>
</section>

<script>
 document.addEventListener("DOMContentLoaded", () => {
  // Variables
  const filterMenu = document.querySelectorAll(".filters_menu li");
  const products = document.querySelectorAll(".grid .all");
  const cartPopup = document.getElementById("cart-popup");
  const cartItemsList = document.getElementById("cart-items-list");
  const cartSummary = document.getElementById("cart-summary");
  const clearCartBtn = document.getElementById("clear-cart-btn");
  const closeCartBtn = document.getElementById("close-cart-btn");

  let cart = [];
  let cartItemCount = 0;

  // Filter Menu Functionality
  filterMenu.forEach(filter => {
    filter.addEventListener("click", () => {
      // Remove active class and add it to the selected filter
      filterMenu.forEach(item => item.classList.remove("active"));
      filter.classList.add("active");

      const filterValue = filter.getAttribute("data-filter");

      // Show or hide products based on the filter
      products.forEach(product => {
        if (filterValue === "all" || product.getAttribute("data-category") === filterValue) {
          product.style.display = "block";
        } else {
          product.style.display = "none";
        }
      });
    });
  });

  // Update Cart Display
  function updateCartDisplay() {
    cartItemsList.innerHTML = "";
    let total = 0;

    // Display cart items or show "No items in cart"
    if (cart.length === 0) {
      cartItemsList.innerHTML = "<p>No items in the cart</p>";
      cartSummary.innerHTML = "";
      return;
    }

    // Add items to cart popup and calculate total
    cart.forEach((item, index) => {
      total += item.price * item.quantity;
      const listItem = document.createElement("div");
      listItem.className = "cart-item";
      listItem.innerHTML = `
        <div>
          <span>${item.name} - $${item.price} x${item.quantity}</span>
          <button class="remove-item" data-index="${index}" style="background-color: red; color: white; margin-left: 10px; padding: 5px;">Remove</button>
        </div>
      `;
      cartItemsList.appendChild(listItem);
    });

    // Update cart summary
    cartSummary.innerHTML = `
      <p>Total Items: ${cartItemCount}</p>
      <p>Total Price: $${total.toFixed(2)}</p>
    `;

    // Add remove functionality to each button
    document.querySelectorAll(".remove-item").forEach(button => {
      button.addEventListener("click", () => {
        const index = button.getAttribute("data-index");
        const removedItem = cart[index];
        cartItemCount -= removedItem.quantity;
        cart.splice(index, 1);
        updateCartDisplay();
      });
    });
  }

  // Add to Cart Functionality
  document.querySelectorAll(".add-to-cart-btn").forEach(button => {
    button.addEventListener("click", () => {
      const id = button.getAttribute("data-id");
      const name = button.getAttribute("data-name");
      const price = parseFloat(button.getAttribute("data-price"));

      // Check if item already exists in cart
      const existingItem = cart.find(item => item.id === id);
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({ id, name, price, quantity: 1 });
      }

      cartItemCount++;
      updateCartDisplay();
      cartPopup.style.display = "block"; // Show cart popup
    });
  });

  // Clear Cart Functionality
  clearCartBtn.addEventListener("click", () => {
    cart = [];
    cartItemCount = 0;
    updateCartDisplay();
  });

  // Close Cart Popup
  closeCartBtn.addEventListener("click", () => {
    cartPopup.style.display = "none";
  });
});

  </script>
  
{% endblock content %}
{% block footer %} 
{% endblock footer %}
